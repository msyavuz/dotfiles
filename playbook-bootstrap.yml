- name: Bootstrap desktop and dev environment
  hosts: localhost
  vars_prompt:
    - name: x11
      prompt: Should environment be configured for x11
      default: "false"

  tasks:
    - name: Install common packages with dnf
      become: true
      ansible.builtin.dnf:
        name:
          - golang
          - rust
          - cargo
          - clippy
        state: present
      when: ansible_distribution == "Fedora"

    - name: Install packages with dnf for wayland
      become: true
      ansible.builtin.dnf:
        name:
          - direnv
          - dunst
          - git
          - hyprland
          # TODO: add this building
          # - ghostty
        state: present
      when: ansible_distribution == "Fedora" and x11 == "false"

    - name: Install packages with cargo
      become: true
      community.general.cargo:
        name:
          - impala
